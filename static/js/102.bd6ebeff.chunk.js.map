{"version":3,"file":"static/js/102.bd6ebeff.chunk.js","mappings":"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","sources":["manager/page/AllProduct/AllProduct.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport * as Realm from 'realm-web';\r\nimport Form from '@rjsf/core';\r\nimport validator from '@rjsf/validator-ajv8';\r\nimport './Myform.css';\r\n\r\n\r\n\r\nconst AllProduct = () => {\r\n  const app = new Realm.App({ id: process.env.REACT_APP_KEY });\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const [user, setUser] = useState();\r\n  const [jsonSchema, setjsonSchema] = useState({});\r\n  const [uiSchema, setuiSchema] = useState({});\r\n\r\n\r\n  useEffect(() => {\r\n    refreshAccessToken();\r\n  }, []);\r\n\r\n  const refreshAccessToken = async () => {\r\n    \r\n   try {\r\n    await app?.currentUser?.refreshAccessToken();\r\n      setUser(app?.currentUser);\r\n    \r\n   } catch (error) {\r\n    console.log(error.error)\r\n   }\r\n      \r\n   \r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [app.currentUser]); // Thêm app.currentUser vào mảng dependency để useEffect được gọi lại khi currentUser thay đổi\r\n\r\n  const fetchData = async () => {\r\n    const FunctionName = 'form';\r\n    const functionName = 'UseModule';\r\n    const arg = ['Cart_Module', app?.currentUser?.id];\r\n    try {\r\n      await app?.currentUser?.callFunction(functionName, ...arg);\r\n      const findCart = await app?.currentUser?.callFunction(FunctionName);\r\n      console.log(findCart);\r\n      setjsonSchema(findCart[0]?.public?.input?.jsonSchema);\r\n      setProducts(findCart[0]?.public?.output?.jsonData?.products);\r\n      setUser(app.currentUser);\r\n      setuiSchema(findCart[0]?.public?.input?.uiSchema);\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n   \r\n  };\r\n\r\n  const handleSubmit = async (formData) => {\r\n    const FunctionName = 'QueryProducts';\r\n    const args = [formData.formData, app?.currentUser?.id];\r\n\r\n    try {\r\n      const result = await app?.currentUser?.callFunction(FunctionName, ...args);\r\n      fetchData();\r\n      console.log(result);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {user ? (\r\n        <>\r\n          {jsonSchema && uiSchema && (\r\n            <div className=\"container mx-auto p-4 relative\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"flex justify-center\">\r\n                  <Form\r\n                    className=\"w-full max-w-md p-8 rounded-lg shadow-lg\"\r\n                    validator={validator}\r\n                    schema={jsonSchema}\r\n                    uiSchema={uiSchema}\r\n                    onSubmit={handleSubmit}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {products.length > 0 && ( // Thêm kiểm tra products trước khi map\r\n            <table className=\"border-collapse border border-green-800 w-full\">\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"border border-green-600 px-4 py-2\">Tên sản phẩm</th>\r\n                  <th className=\"border border-green-600 px-4 py-2\">Loại sản phẩm</th>\r\n                  <th className=\"border border-green-600 px-4 py-2\">Giá mua</th>\r\n                  <th className=\"border border-green-600 px-4 py-2\">Giá bán</th>\r\n                  <th className=\"border border-green-600 px-4 py-2\">Số lượng</th>\r\n                  <th className=\"border border-green-600 px-4 py-2\">Ngày nhập</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {products.map((product, index) => (\r\n                  <tr key={index}>\r\n                    <td className=\"border border-green-600 px-4 py-2\">{product.productName}</td>\r\n                    <td className=\"border border-green-600 px-4 py-2\">{product.productType}</td>\r\n                    <td className=\"border border-green-600 px-4 py-2\">{product.purchasePrice}</td>\r\n                    <td className=\"border border-green-600 px-4 py-2\">{product.sellingPrice}</td>\r\n                    <td className=\"border border-green-600 px-4 py-2\">{product.quantity}</td>\r\n                    <td className=\"border border-green-600 px-4 py-2\">\r\n                      {product.dateImported.year}/{product.dateImported.month}/{product.dateImported.day}/\r\n                      {product.dateImported.hour} {product.dateImported.period}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div> Bạn phải đăng nhập đã nhé</div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AllProduct;\r\n"],"names":["AllProduct","app","Realm","id","process","products","setProducts","useState","user","setUser","jsonSchema","setjsonSchema","uiSchema","setuiSchema","useEffect","refreshAccessToken","async","_app$currentUser","currentUser","error","console","log","fetchData","_app$currentUser2","arg","_app$currentUser3","_app$currentUser4","_findCart$","_findCart$$public","_findCart$$public$inp","_findCart$2","_findCart$2$public","_findCart$2$public$ou","_findCart$2$public$ou2","_findCart$3","_findCart$3$public","_findCart$3$public$in","callFunction","findCart","public","input","output","jsonData","_jsx","_Fragment","children","_jsxs","className","Form","validator","schema","onSubmit","_app$currentUser5","args","formData","_app$currentUser6","result","length","map","product","index","productName","productType","purchasePrice","sellingPrice","quantity","dateImported","year","month","day","hour","period"],"sourceRoot":""}