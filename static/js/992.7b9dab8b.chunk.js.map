{"version":3,"file":"static/js/992.7b9dab8b.chunk.js","mappings":"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","sources":["manager/managerhome.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as Realm from 'realm-web';\r\nimport Form from '@rjsf/core';\r\nimport validator from '@rjsf/validator-ajv8';\r\nimport './JsonForm.css';\r\nconst schema = {\r\n  type: 'object',\r\n  required: ['year', 'month', 'week', 'startDay', 'endDate'],\r\n  properties: {\r\n    year: { type: 'number', title: 'Năm', default:2024 },\r\n    month: { type: 'number', title: 'Tháng',default:3 },\r\n    week: { type: 'number', title: 'Tuần thứ' },\r\n    startDay: { type: 'number', title: 'Ngày bắt đầu của tuần',default:1 },\r\n    endDate: { type: 'number', title: 'Ngày kết thúc của tuần',default:7 }\r\n  }\r\n};\r\n\r\nconst ManagerHome = () => {\r\n  const [showForm, setShowForm] = useState(true);\r\n  const [jsonForm, setJsonForm] = useState('');\r\n\r\n  const [openUserBillDetails, setOpenUserBillDetails] = useState({});\r\n  const app = new Realm.App({ id: process.env.REACT_APP_KEY });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []); // Empty dependency array means it runs once on mount\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      if (!app.currentUser) {\r\n      \r\n      } else {\r\n\r\n        const result = await app.currentUser.callFunction(\"BillJsonForm\");\r\n        setJsonForm(result[0]);\r\n        await app.currentUser.refreshAccessToken();\r\n      }\r\n    } catch (error) {\r\n      navigate('/managerofinan/login');\r\n      alert(error.message || 'An error occurred');\r\n    }\r\n  };\r\n\r\n  const toggleUserBillDetails = (userBillIndex) => {\r\n    setOpenUserBillDetails(prevState => ({\r\n      ...prevState,\r\n      [userBillIndex]: !prevState[userBillIndex]\r\n    }));\r\n  };\r\n  const handleSubmit = async ({ formData }) => {\r\n    // Xử lý dữ liệu ở đây\r\n const arg=[formData,app.currentUser.id]\r\n    await app.currentUser.callFunction(\"updateoption\",...arg);\r\n    fetchData();\r\n    setShowForm(false); // Ẩn form sau khi submit\r\n  };\r\n\r\n  const handleFormClick = () => {\r\n    setShowForm(true); // Hiển thị form khi người dùng nhấn vào chữ \"Form\"\r\n  };\r\n\r\n  return (\r\n    \r\n   \r\n    <div className=\"container mx-auto px-4 py-8\">\r\n       <div className=\"containers\">\r\n      {showForm ? (\r\n        <Form\r\n          schema={schema}\r\n    \r\n          onSubmit={handleSubmit}\r\n          validator={validator}\r\n        />\r\n      ) : (\r\n        <div className=\"form-text\" onClick={handleFormClick}>Form</div>\r\n      )}\r\n    </div>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\r\n        {jsonForm?.public?.output?.jsonData ?(\r\n          <>\r\n          {jsonForm?.public?.output?.jsonData?.bill.map((userBill, userBillIndex) => (\r\n          <div key={userBillIndex} className=\"border border-gray-300 p-4\">\r\n            <p className=\"text-lg font-semibold\">Đơn hàng: {userBill?.day}</p>\r\n            <p>Ngày mua: {userBill?.date?.day}/{userBill?.date?.month}/{userBill?.date?.year}</p>\r\n            <p>Giờ mua: {userBill?.date?.hour}.{userBill?.date?.period}</p>\r\n            <p>Người mua: {userBill?.user}</p>\r\n            <p>ID người mua: {userBill?.userId}</p>\r\n            {openUserBillDetails[userBillIndex] && (\r\n              <div className=\"mt-4\">\r\n                <ul>\r\n                  {userBill?.cart?.products?.map((product, productIndex) => (\r\n                    <li key={productIndex} className=\"border p-4 mb-2\">\r\n                      <p className=\"font-semibold\">Tên sản phẩm: {product.productName}</p>\r\n                      <p>Loại sản phẩm: {product.productType}</p>\r\n                      <p>Số lượng: {product.quantity}</p>\r\n                      <p>Giá bán: {product.sellingPrice}</p>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n            <button onClick={() => toggleUserBillDetails(userBillIndex)} className=\"mt-4 bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600\">\r\n              {openUserBillDetails[userBillIndex] ? 'Ẩn chi tiết đơn hàng' : 'Hiển thị chi tiết đơn hàng'}\r\n            </button>\r\n          </div>\r\n        ))}\r\n          </>\r\n        ):(\r\n          <div>\r\n            ko có dữ liệu đơn hàng trong thời giang này\r\n          </div>\r\n        )}\r\n        \r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManagerHome;\r\n"],"names":["schema","type","required","properties","year","title","default","month","week","startDay","endDate","ManagerHome","_jsonForm$public","_jsonForm$public$outp","_jsonForm$public2","_jsonForm$public2$out","_jsonForm$public2$out2","showForm","setShowForm","useState","jsonForm","setJsonForm","openUserBillDetails","setOpenUserBillDetails","app","Realm","id","process","navigate","useNavigate","useEffect","fetchData","async","currentUser","result","callFunction","refreshAccessToken","error","alert","message","_jsxs","className","children","_jsx","Form","onSubmit","formData","_ref","arg","validator","onClick","handleFormClick","public","output","jsonData","_Fragment","bill","map","userBill","userBillIndex","_userBill$date","_userBill$date2","_userBill$date3","_userBill$date4","_userBill$date5","_userBill$cart","_userBill$cart$produc","day","date","hour","period","user","userId","cart","products","product","productIndex","productName","productType","quantity","sellingPrice","prevState","toggleUserBillDetails"],"sourceRoot":""}