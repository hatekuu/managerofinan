{"version":3,"file":"static/js/363.2c086159.chunk.js","mappings":"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","sources":["manager/page/AllProduct/AllProduct.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport * as Realm from 'realm-web';\r\nimport Form from '@rjsf/core';\r\nimport validator from '@rjsf/validator-ajv8';\r\n\r\nconst schema = {\r\n  type: 'object',\r\n  properties: {\r\n    productName: { type: 'string', title: 'Tên sản phẩm' },\r\n    productType: {\r\n      type: 'string',\r\n      title: 'Cách in ấn',\r\n      enum: ['In 2d', 'In 3d'],\r\n      enumNames: ['In 2D', 'In 3D'],\r\n    },\r\n    purchasePrice: { type: 'number', title: 'Chi phí sản xuất, giá mua(Nghìn đồng)' },\r\n    sellingPrice: { type: 'number', title: 'Giá bán' },        \r\n    quantity: { type: 'integer', title: 'Số lượng' },\r\n  },\r\n  required: ['productName', 'productType', 'purchasePrice', 'sellingPrice', 'quantity'],\r\n};\r\n\r\nconst uiSchema = {\r\n  productName: { \"ui:options\": { readonly: true } }\r\n};\r\n\r\nconst AllProduct = () => {\r\n  const app = new Realm.App({ id: process.env.REACT_APP_KEY });\r\n  const [search, setSearch] = useState('');\r\n  const [products, setProducts] = useState([]);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const [product, setProduct] = useState({});\r\n  const [showProduct, setShowProduct] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    const FunctionName = 'getAllProducts';\r\n    const result = await app?.currentUser?.callFunction(FunctionName);\r\n    setProducts(result);\r\n    console.log(result);\r\n  };\r\n\r\n  const handleChange = async (e) => {\r\n    const FunctionName = 'autoComplete';\r\n    setSearch(e.target.value);\r\n    if (e.target.value !== \"\") {\r\n      const result = await app?.currentUser?.callFunction(FunctionName, e.target.value);\r\n      setSuggestions(result);\r\n      setShowSuggestions(true);\r\n    } else {\r\n      setSuggestions([]);\r\n      setShowSuggestions(false);\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = async (name) => {\r\n    const FunctionName = 'seacrproducts';\r\n    try {\r\n      const result = await app?.currentUser?.callFunction(FunctionName, name);\r\n      setProduct(result);\r\n      setShowProduct(true);\r\n      console.log(\"search:\", result);\r\n      setSearch('');\r\n      setSuggestions([]);\r\n      setShowSuggestions(false);\r\n    } catch (error) {\r\n       console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (formData) => {\r\n    const FunctionName = 'updataProduct';\r\n    try {\r\n      const result = await app?.currentUser?.callFunction(FunctionName, formData.formData);\r\n      setShowProduct(false);\r\n      fetchData();\r\n      console.log(result);\r\n    } catch (error) {\r\n       console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 relative\">\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-gray-700 text-sm font-bold mb-2\">\r\n          Search:\r\n        </label>\r\n        <input\r\n          className=\"w-full px-3 py-2 border rounded border-gray-300 focus:outline-none focus:border-indigo-500\"\r\n          type=\"text\"\r\n          value={search}\r\n          onChange={handleChange}\r\n        />\r\n        {showSuggestions && suggestions?.length > 0 && (\r\n          <div className=\"absolute bg-white border rounded shadow-lg mt-1 w-full\">\r\n            <ul>\r\n              {suggestions?.map((suggestion, index) => (\r\n                <li key={index} className=\"px-4 py-2 hover:bg-gray-100 cursor-pointer\" onClick={() => handleSuggestionClick(suggestion?.productName)}>\r\n                  {suggestion?.productName}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {showProduct && (\r\n        <div className=\"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-gray-800 bg-opacity-75\">\r\n          <div className=\"bg-white p-4 border rounded shadow-lg\">\r\n            <Form schema={schema} formData={product} validator={validator} uiSchema={uiSchema} onSubmit={handleSubmit} />\r\n            <button onClick={() => setShowProduct(false)} className=\"bg-gray-500 text-white px-4 py-2 rounded mt-2\">Close</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 gap-4\">\r\n        {products.map((product, productIndex) => (\r\n          <div key={productIndex} className=\"mb-4 p-4 border rounded shadow\">\r\n            <p className=\" mb-2\"><span className=\"font-bold text-lg \">Tên sản phẩm:</span> {product.productName}</p>\r\n  <p className=\"mb-1\"><span className=\"font-bold\">Cách in:</span> {product.productType}</p>\r\n  <p className=\"mb-1\"><span className=\"font-bold\">Chi phí sản xuất, giá mua: </span> {product.purchasePrice}k VNĐ</p>\r\n  <p className=\"mb-1\"><span className=\"font-bold\">Giá bán: </span>{product.sellingPrice}k VNĐ</p>\r\n  <p className=\"mb-1\"><span className=\"font-bold\">Ngày thêm vào kho:</span> {product?.dateImported?.day}/{product?.dateImported?.month}/{product?.dateImported?.year}</p>\r\n  {product?.updateDate?.day && (\r\n    <p className=\"mb-1\"><span className=\"font-bold\">Ngày thêm nhập mới nhất: </span>{product?.updateDate?.day}/{product?.updateDate?.month}/{product?.updateDate?.year}</p>\r\n  )}\r\n            <button onClick={() => handleSuggestionClick(product?.productName)} className=\"bg-blue-500 text-white px-4 py-2 rounded mt-2\">Edit</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllProduct;\r\n"],"names":["schema","type","properties","productName","title","productType","enum","enumNames","purchasePrice","sellingPrice","quantity","required","uiSchema","readonly","AllProduct","app","Realm","id","process","search","setSearch","useState","products","setProducts","suggestions","setSuggestions","showSuggestions","setShowSuggestions","product","setProduct","showProduct","setShowProduct","useEffect","fetchData","async","_app$currentUser","result","currentUser","callFunction","console","log","handleSuggestionClick","_app$currentUser3","name","error","_jsxs","className","children","_jsx","value","onChange","e","target","_app$currentUser2","length","map","suggestion","index","onClick","Form","formData","validator","onSubmit","_app$currentUser4","productIndex","_product$dateImported","_product$dateImported2","_product$dateImported3","_product$updateDate","_product$updateDate2","_product$updateDate3","_product$updateDate4","dateImported","day","month","year","updateDate"],"sourceRoot":""}