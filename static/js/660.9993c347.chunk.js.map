{"version":3,"file":"static/js/660.9993c347.chunk.js","mappings":"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","sources":["manager/page/BillForm/Bill.js","manager/page/BillForm/BillForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst Bill = ({ jsonData }) => {\r\n  const [openUserBillDetails, setOpenUserBillDetails] = useState({});\r\n\r\n  const toggleUserBillDetails = (userBillIndex) => {\r\n    setOpenUserBillDetails((prevState) => ({\r\n      ...prevState,\r\n      [userBillIndex]: !prevState[userBillIndex],\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {jsonData ? (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"table-auto w-full\">\r\n            <thead>\r\n              <tr className=\"bg-gray-200\">\r\n                <th className=\"px-4 py-2\">Đơn hàng</th>\r\n                <th className=\"px-4 py-2\">Ngày mua</th>\r\n                <th className=\"px-4 py-2\">Giờ mua</th>\r\n                <th className=\"px-4 py-2\">Người mua</th>\r\n                <th className=\"px-4 py-2\">ID người mua</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {jsonData?.map((userBill, userBillIndex) => (\r\n                <React.Fragment key={userBillIndex}>\r\n                  <tr> \r\n                    <td>\r\n                      <button onClick={() => toggleUserBillDetails(userBillIndex)} className=\"mt-4 form-text py-2 px-4 rounded\">\r\n                        {openUserBillDetails[userBillIndex] ? 'Ẩn' : 'Chi tiết'}\r\n                      </button>\r\n                    </td>\r\n                    <td className=\"border px-4 py-2\">{userBill?.date?.day}/{userBill?.date?.month}/{userBill?.date?.year}</td>\r\n                    <td className=\"border px-4 py-2\">{userBill?.date?.hour}.{userBill?.date?.period}</td>\r\n                    <td className=\"border px-4 py-2\">{userBill?.user}</td>\r\n                    <td className=\"border px-4 py-2\">{userBill?.userId}</td>\r\n                  </tr>\r\n                  {openUserBillDetails[userBillIndex] && (\r\n                    <tr>\r\n                      <td colSpan=\"5\">\r\n                        <div className=\"fixed inset-0 z-10 flex justify-center items-center bg-black bg-opacity-50\">\r\n                          <div className=\"bg-white p-8 rounded-lg\">\r\n                            <h2 className=\"text-2xl font-semibold mb-4\">Chi tiết đơn hàng</h2>\r\n                            <ul>\r\n                              {userBill?.cart?.map((product, productIndex) => (\r\n                                <li key={productIndex} className=\"border p-4 mb-2\">\r\n                                  <p className=\"font-semibold\">Tên sản phẩm: {product.productName}</p>\r\n                                  <p>Loại sản phẩm: {product.productType}</p>\r\n                                  <p>Số lượng: {product.quantity}</p>\r\n                                  <p>Giá bán: {product.sellingPrice}</p>\r\n                                </li>\r\n                              ))}\r\n                            </ul>\r\n                            <button onClick={() => toggleUserBillDetails(userBillIndex)} className=\"mt-4 form-text py-2 px-4 rounded\">\r\n                              Đóng\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </React.Fragment>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center\">\r\n          Không có dữ liệu đơn hàng trong thời gian này\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Bill;\r\n","import React, { useEffect, useState } from 'react';\r\nimport * as Realm from 'realm-web';\r\nimport Form from '@rjsf/core';\r\nimport validator from '@rjsf/validator-ajv8';\r\nimport './JsonForm.css';\r\nimport Bill from './Bill';\r\nimport { useNavigate } from 'react-router-dom';\r\nconst BillForm = () => {\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [jsonForm, setJsonForm] = useState('');\r\n  const [user, setUser] = useState();\r\n  const [jsonSchema, setjsonSchema] = useState({});\r\n\r\n  const app = new Realm.App({ id: process.env.REACT_APP_KEY });\r\n  const navigate = useNavigate();\r\n  useEffect(()=>{\r\n   refreshAccessToken()\r\n },[])\r\n const refreshAccessToken = async()=>{\r\n  try {\r\n    if(!app.currentUser?.accessToken) {navigate('/managerofinan/login');}\r\n    await app?.currentUser?.refreshAccessToken()\r\n    \r\n    setUser(app?.currentUser)\r\n  } catch (error) {\r\n    if(!app.currentUser?.accessToken) {navigate('/managerofinan/login');}\r\n  }\r\n}\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []); // Empty dependency array means it runs once on mount\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const functionName = 'UseModule';\r\n      const arg = ['Bill_Module', app?.currentUser?.id];\r\n\r\n      await app?.currentUser?.callFunction(functionName, ...arg);\r\n      const findCart = await app?.currentUser?.callFunction(\"BillJsonForm\");\r\n      setJsonForm(findCart[0]?.public?.output?.jsonData?.product);\r\n      setjsonSchema(findCart[0]?.public?.input?.jsonSchema);\r\n      console.log(findCart)\r\n      setUser(app.currentUser);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async ({ formData }) => {\r\n    \r\n  \r\n    const arg=[formData,app?.currentUser?.id]\r\n    try {\r\n   \r\n      await app.currentUser.callFunction(\"updateoption\",...arg);\r\n      fetchData();\r\n      setShowForm(false); // Ẩn form sau khi submit\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleFormClick = () => {\r\n    setShowForm(true); // Hiển thị form khi người dùng nhấn vào chữ \"Form\"\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {user ? (\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <div className=\"containers\">\r\n            {showForm ? (\r\n              jsonSchema && (\r\n                <Form\r\n                  schema={jsonSchema}\r\n                  onSubmit={handleSubmit}\r\n                  validator={validator}\r\n                />\r\n              )\r\n            ) : (\r\n              <div className=\"form-text\" onClick={handleFormClick}>\r\n                Ấn vào đây để mở form\r\n              </div>\r\n            )}\r\n          </div>\r\n          <Bill jsonData={jsonForm}/>\r\n        </div>\r\n      ) : (\r\n        <div> Đăng nhập đã nhé!</div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BillForm;\r\n"],"names":["_ref","jsonData","openUserBillDetails","setOpenUserBillDetails","useState","toggleUserBillDetails","userBillIndex","prevState","_jsx","_Fragment","children","className","_jsxs","map","userBill","_userBill$date","_userBill$date2","_userBill$date3","_userBill$date4","_userBill$date5","_userBill$cart","React","onClick","date","day","month","year","hour","period","user","userId","colSpan","cart","product","productIndex","productName","productType","quantity","sellingPrice","BillForm","showForm","setShowForm","jsonForm","setJsonForm","setUser","jsonSchema","setjsonSchema","app","Realm","id","process","navigate","useNavigate","useEffect","refreshAccessToken","async","_app$currentUser","_app$currentUser2","currentUser","accessToken","error","_app$currentUser3","fetchData","_app$currentUser4","_app$currentUser5","_app$currentUser6","_findCart$","_findCart$$public","_findCart$$public$out","_findCart$$public$out2","_findCart$2","_findCart$2$public","_findCart$2$public$in","functionName","arg","callFunction","findCart","public","output","input","console","log","Form","schema","onSubmit","_app$currentUser7","formData","validator","handleFormClick","Bill"],"sourceRoot":""}